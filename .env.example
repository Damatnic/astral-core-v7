# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================

# Primary database connection string for Prisma
# Format: postgresql://username:password@hostname:port/database_name
# For local development: postgresql://astral_user:your_password@localhost:5432/astralcore_v7
DATABASE_URL="postgresql://username:password@localhost:5432/astralcore_v7"

# Direct connection URL for Prisma migrations and introspection
# Usually the same as DATABASE_URL unless using connection pooling
DIRECT_URL="postgresql://username:password@localhost:5432/astralcore_v7"

# ==============================================================================
# AUTHENTICATION & SESSION MANAGEMENT
# ==============================================================================

# Base URL for NextAuth.js callbacks and redirects
# Development: http://localhost:3000
# Staging: https://staging.astral-core.app
# Production: https://app.astral-core.com
NEXTAUTH_URL="http://localhost:3000"

# Secret key for NextAuth.js session encryption and JWT signing
# Generate with: openssl rand -base64 32
# ⚠️ NEVER share this key - it's used to encrypt user sessions
NEXTAUTH_SECRET="generate-with-openssl-rand-base64-32"

# ==============================================================================
# OAUTH PROVIDERS (OPTIONAL)
# ==============================================================================

# Google OAuth 2.0 credentials
# Get from: https://console.developers.google.com/
# Required scopes: openid, email, profile
GOOGLE_CLIENT_ID=""
GOOGLE_CLIENT_SECRET=""

# GitHub OAuth App credentials
# Get from: https://github.com/settings/applications/new
GITHUB_ID=""
GITHUB_SECRET=""

# ==============================================================================
# SECURITY & ENCRYPTION
# ==============================================================================

# AES-256-GCM key for PHI (Protected Health Information) encryption
# Generate with: openssl rand -hex 32
# ⚠️ CRITICAL: Never change this in production - will make data unreadable
ENCRYPTION_KEY="generate-with-openssl-rand-hex-32"

# JWT signing key for API tokens (separate from NextAuth)
# Generate with: openssl rand -base64 32
JWT_SIGNING_KEY="generate-with-openssl-rand-base64-32"

# Session timeout in minutes (default: 30)
# Shorter for production environments recommended (15 minutes)
SESSION_TIMEOUT_MINUTES="30"

# Maximum login attempts before account lockout
# Helps prevent brute force attacks
MAX_LOGIN_ATTEMPTS="5"

# Account lockout duration in minutes after exceeding login attempts
LOCKOUT_DURATION_MINUTES="15"

# ==============================================================================
# HIPAA COMPLIANCE SETTINGS
# ==============================================================================

# How long to retain audit logs (days)
# 2555 days = ~7 years (HIPAA requirement)
AUDIT_LOG_RETENTION_DAYS="2555"

# Enable/disable PHI encryption at rest
# ⚠️ Must be "true" for HIPAA compliance
PHI_ENCRYPTION_ENABLED="true"

# Require Multi-Factor Authentication for all users
# Set to "true" for production environments
REQUIRE_MFA="false"

# ==============================================================================
# RATE LIMITING & DDOS PROTECTION
# ==============================================================================

# Time window for rate limiting in milliseconds (default: 1 minute)
RATE_LIMIT_WINDOW_MS="60000"

# Maximum requests per window per IP address
# Development: 100, Production: 50 (stricter)
RATE_LIMIT_MAX_REQUESTS="100"

# ==============================================================================
# EMAIL DELIVERY CONFIGURATION
# ==============================================================================

# From address for system emails (notifications, password resets, etc.)
EMAIL_FROM="noreply@astralcore.app"

# Email provider: "resend" or "sendgrid"
# Resend recommended for better deliverability
EMAIL_PROVIDER="resend"

# Resend API key (if using Resend)
# Get from: https://resend.com/api-keys
RESEND_API_KEY=""

# SendGrid API key (if using SendGrid)
# Get from: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=""

# ==============================================================================
# FILE STORAGE CONFIGURATION
# ==============================================================================

# Storage provider: "local", "s3", or "gcs"
# "local" for development, "s3" for production
STORAGE_PROVIDER="local"

# AWS S3 Configuration (if using S3)
# Bucket name for file storage
AWS_S3_BUCKET=""

# AWS region (e.g., "us-east-1", "eu-west-1")
AWS_S3_REGION=""

# AWS IAM credentials with S3 permissions
AWS_ACCESS_KEY_ID=""
AWS_SECRET_ACCESS_KEY=""

# ==============================================================================
# ANALYTICS & TRACKING
# ==============================================================================

# PostHog analytics key for user behavior tracking
# Get from: https://app.posthog.com/project/settings
# Leave empty to disable analytics
POSTHOG_KEY=""

# PostHog host (default is fine for cloud version)
POSTHOG_HOST="https://app.posthog.com"

# ==============================================================================
# ERROR MONITORING & LOGGING
# ==============================================================================

# Sentry DSN for error tracking and performance monitoring
# Get from: https://sentry.io/settings/projects/
SENTRY_DSN=""

# Sentry authentication token (for source map uploads)
SENTRY_AUTH_TOKEN=""

# Your Sentry organization slug
SENTRY_ORG=""

# Your Sentry project name
SENTRY_PROJECT=""

# ==============================================================================
# FEATURE FLAGS
# ==============================================================================

# Enable/disable crisis intervention features
# ⚠️ Should always be "true" for mental health applications
ENABLE_CRISIS_INTERVENTION="true"

# Enable AI-powered assistance (experimental)
# Requires OPENAI_API_KEY or ANTHROPIC_API_KEY
ENABLE_AI_ASSISTANCE="false"

# Enable video therapy sessions
# Requires integration with video platform (Zoom, WebRTC, etc.)
ENABLE_VIDEO_SESSIONS="false"

# Enable group therapy features
# Currently under development
ENABLE_GROUP_THERAPY="false"

# ==============================================================================
# AI INTEGRATION (EXPERIMENTAL)
# ==============================================================================

# OpenAI API key for GPT models
# Get from: https://platform.openai.com/api-keys
# Used for AI-powered insights and assistance
OPENAI_API_KEY=""

# Anthropic API key for Claude models
# Get from: https://console.anthropic.com/
# Alternative to OpenAI for AI features
ANTHROPIC_API_KEY=""

# ==============================================================================
# PAYMENT PROCESSING (STRIPE)
# ==============================================================================

# Stripe publishable key (client-side)
# Test: pk_test_... | Live: pk_live_...
# Get from: https://dashboard.stripe.com/apikeys
STRIPE_PUBLISHABLE_KEY=""

# Stripe secret key (server-side)
# Test: sk_test_... | Live: sk_live_...
# ⚠️ Keep this secret - never expose to client
STRIPE_SECRET_KEY=""

# Stripe webhook signing secret
# Get from webhook endpoint configuration in Stripe dashboard
# Used to verify webhook authenticity
STRIPE_WEBHOOK_SECRET="whsec_your_webhook_secret_here"

# ==============================================================================
# APPLICATION ENVIRONMENT
# ==============================================================================

# Node.js environment
# Values: "development", "staging", "production"
NODE_ENV="development"

# Public URL for the application (used in client-side code)
# Must match NEXTAUTH_URL for authentication to work
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# Application name (displayed in UI and emails)
NEXT_PUBLIC_APP_NAME="Astral Core"

# Application version (displayed in UI)
NEXT_PUBLIC_APP_VERSION="7.0.0"

# ==============================================================================
# SECURITY RECOMMENDATIONS
# ==============================================================================
#
# 1. NEVER commit this file with real values to version control
# 2. Use different keys for each environment (dev, staging, prod)
# 3. Store production secrets in secure secret management systems
# 4. Rotate keys regularly (quarterly recommended)
# 5. Use strong, randomly generated passwords and keys
# 6. Enable SSL/TLS in production (update URLs to https://)
# 7. Regularly audit access to secrets and rotate compromised keys
#
# ==============================================================================

# ==============================================================================
# QUICK SETUP COMMANDS
# ==============================================================================
#
# Generate required secrets:
#   NEXTAUTH_SECRET: openssl rand -base64 32
#   ENCRYPTION_KEY:  openssl rand -hex 32
#   JWT_SIGNING_KEY: openssl rand -base64 32
#
# Create local database:
#   createdb astralcore_v7
#
# Run initial setup:
#   cp .env.example .env
#   # Edit .env with your values
#   npm run db:generate
#   npm run db:migrate
#   npm run dev
#
# ==============================================================================